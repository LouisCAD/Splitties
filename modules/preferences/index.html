
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A collection of hand-crafted extensions for your Kotlin projects.">
      
      
      
        <meta name="author" content="LouisCAD">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.3.0">
    
    
      
        <title>Preferences - Splitties</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8b42a75e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="green" data-md-color-accent="blue">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#preferences" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Splitties" class="md-header__button md-logo" aria-label="Splitties" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Splitties
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Preferences
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/LouisCAD/Splitties/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    LouisCAD/Splitties
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Splitties" class="md-nav__button md-logo" aria-label="Splitties" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Splitties
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/LouisCAD/Splitties/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    LouisCAD/Splitties
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Modules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modules" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../activities/" class="md-nav__link">
        Activities
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../alertdialog/" class="md-nav__link">
        Alert Dialog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../alertdialog-appcompat/" class="md-nav__link">
        Alert Dialog AppCompat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../alertdialog-appcompat-coroutines/" class="md-nav__link">
        Alert Dialog AppCompat Coroutines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../alertdialog-material/" class="md-nav__link">
        Alert Dialog Material
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appctx/" class="md-nav__link">
        App Context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../arch-lifecycle/" class="md-nav__link">
        Arch Lifecycle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../arch-room/" class="md-nav__link">
        Arch Room
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bitflags/" class="md-nav__link">
        Bit Flags
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bundle/" class="md-nav__link">
        Bundle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../collections/" class="md-nav__link">
        Collections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../coroutines/" class="md-nav__link">
        Coroutines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../checkedlazy/" class="md-nav__link">
        Checked Lazy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dimensions/" class="md-nav__link">
        Dimensions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fragments/" class="md-nav__link">
        Fragments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fragmentargs/" class="md-nav__link">
        Fragment Args
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../intents/" class="md-nav__link">
        Intents
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lifecycle-coroutines/" class="md-nav__link">
        Lifecycle Coroutines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mainhandler/" class="md-nav__link">
        Main Handler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mainthread/" class="md-nav__link">
        Main Thread
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../material-colors/" class="md-nav__link">
        Material Colors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../material-lists/" class="md-nav__link">
        Material Lists
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Preferences
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Preferences
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-the-preferences-properties-in-an-object" class="md-nav__link">
    Defining the preferences properties in an object
  </a>
  
    <nav class="md-nav" aria-label="Defining the preferences properties in an object">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-object-and-not-class" class="md-nav__link">
    Why object and not class?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-the-preferences-without-blocking-the-main-thread" class="md-nav__link">
    Loading the preferences without blocking the main thread
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-androidx-datastore-instead-of-sharedpreferences-under-the-hood" class="md-nav__link">
    Using AndroidX DataStore instead of SharedPreferences under the hood
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../permissions/" class="md-nav__link">
        Permissions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resources/" class="md-nav__link">
        Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-selectable/" class="md-nav__link">
        Selectable Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-selectable-appcompat/" class="md-nav__link">
        Selectable Views AppCompat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-selectable-constraintlayout/" class="md-nav__link">
        Selectable Views ConstraintLayout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../snackbar/" class="md-nav__link">
        Snackbar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stetho-init/" class="md-nav__link">
        Stetho init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../systemservices/" class="md-nav__link">
        System Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../toast/" class="md-nav__link">
        Toast
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../typesaferecyclerview/" class="md-nav__link">
        Typesafe RecyclerView
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views/" class="md-nav__link">
        Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-appcompat/" class="md-nav__link">
        Views AppCompat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-cardview/" class="md-nav__link">
        Views CardView
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-coroutines/" class="md-nav__link">
        Views Coroutines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-coroutines-material/" class="md-nav__link">
        Views Coroutines Material
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-dsl/" class="md-nav__link">
        Views DSL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-dsl-appcompat/" class="md-nav__link">
        Views DSL AppCompat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-dsl-constraintlayout/" class="md-nav__link">
        Views DSL ConstraintLayout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-dsl-coordinatorlayout/" class="md-nav__link">
        Views DSL CoordinatorLayout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-dsl-material/" class="md-nav__link">
        Views DSL Material
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-dsl-recyclerview/" class="md-nav__link">
        Views DSL RecyclerView
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-material/" class="md-nav__link">
        Views Material
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../views-recyclerview/" class="md-nav__link">
        Views RecyclerView
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../CHANGELOG/" class="md-nav__link">
        Change Log
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-the-preferences-properties-in-an-object" class="md-nav__link">
    Defining the preferences properties in an object
  </a>
  
    <nav class="md-nav" aria-label="Defining the preferences properties in an object">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-object-and-not-class" class="md-nav__link">
    Why object and not class?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-the-preferences-without-blocking-the-main-thread" class="md-nav__link">
    Loading the preferences without blocking the main thread
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-androidx-datastore-instead-of-sharedpreferences-under-the-hood" class="md-nav__link">
    Using AndroidX DataStore instead of SharedPreferences under the hood
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/LouisCAD/Splitties/edit/main/modules/preferences/README.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="preferences">Preferences<a class="headerlink" href="#preferences" title="Permanent link">&para;</a></h1>
<p><em>Property syntax for Android's <code>SharedPreferences</code>/<code>DataStore</code> or iOS/macOS <code>NSUserDefaults</code>.</em></p>
<p>Supported platforms: <strong>macOS</strong> (x64), <strong>iOS</strong> (arm32, arm64 &amp; x64), <strong>Android</strong>.</p>
<p>This library uses Kotlin's property delegation to make using
<code>SharedPreferences</code> and <code>DataStore&lt;Preferences&gt;</code> as easy as accessing a property on an object,
and provides an <code>NSUserDefaults</code> backed implementation for macOS and iOS.</p>
<p>On Android, it relies on the <code>appCtx</code> module of this library to allow usage in <code>object</code>,
and can support storage on device encrypted storage for devices
supporting Direct Boot. See <a href="/src/androidMain/kotlin/splitties/preferences">the source code</a> for more information.</p>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<p>If you want to use this dependency without using one of the <a href="../..#download">fun packs</a>,
you can use <code>Splitties.preferences</code>, provided you have <a href="https://github.com/jmfayard/refreshVersions">refreshVersions</a> added to the project.</p>
<p>For reference, the maven coordinates of this module are <code>com.louiscad.splitties:splitties-preferences</code>.</p>
<h2 id="table-of-contents">Table of contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#defining-the-preferences-properties-in-an-object">Defining the preferences properties in an object</a><ul>
<li><a href="#why-object-and-not-class">Why <code>object</code> and not <code>class</code>?</a></li>
</ul>
</li>
<li><a href="#loading-the-preferences-without-blocking-the-main-thread">Loading the preferences without blocking the main thread</a></li>
<li><a href="#using-androidx-datastore-instead-of-sharedpreferences-under-the-hood">Using AndroidX DataStore instead of SharedPreferences under the hood</a></li>
</ul>
<h2 id="defining-the-preferences-properties-in-an-object">Defining the preferences properties in an object<a class="headerlink" href="#defining-the-preferences-properties-in-an-object" title="Permanent link">&para;</a></h2>
<p>Define your preferences in an <code>object</code> that extends
<code>splitties.preferences.Preferences</code>, like in the example below:
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="nn">splitties.preferences.Preferences</span>

<span class="kd">object</span> <span class="nc">GamePreferences</span> <span class="p">:</span> <span class="n">Preferences</span><span class="p">(</span><span class="s">&quot;gameState&quot;</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nv">magicNumber</span> <span class="k">by</span> <span class="n">intPref</span><span class="p">(</span><span class="s">&quot;magicNumber&quot;</span><span class="p">,</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="m">0</span><span class="p">)</span>
  <span class="kd">var</span> <span class="nv">currentLevel</span> <span class="k">by</span> <span class="n">intPref</span><span class="p">(</span><span class="s">&quot;currentLevel&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
  <span class="kd">var</span> <span class="nv">bossesFought</span> <span class="k">by</span> <span class="n">intPref</span><span class="p">(</span><span class="s">&quot;bossBattleVictories&quot;</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
  <span class="kd">var</span> <span class="nv">lastTimePlayed</span> <span class="k">by</span> <span class="n">longPref</span><span class="p">(</span><span class="s">&quot;lastSessionTime&quot;</span><span class="p">,</span> <span class="m">0L</span><span class="p">)</span>

  <span class="kd">val</span> <span class="nv">pseudoFlow</span><span class="p">:</span> <span class="n">Flow</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span>
  <span class="kd">var</span> <span class="nv">pseudo</span> <span class="k">by</span> <span class="n">stringPref</span><span class="p">(</span><span class="s">&quot;playerPseudo&quot;</span><span class="p">,</span> <span class="s">&quot;Player 1&quot;</span><span class="p">).</span><span class="na">also</span> <span class="p">{</span>
    <span class="n">pseudoFlow</span> <span class="o">=</span> <span class="nb">it</span><span class="p">.</span><span class="na">valueFlow</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="kd">val</span> <span class="nv">favoriteCharacterFlow</span><span class="p">:</span> <span class="n">Flow</span><span class="o">&lt;</span><span class="kt">String?</span><span class="o">&gt;</span>
  <span class="kd">var</span> <span class="nv">favoriteCharacter</span> <span class="k">by</span> <span class="n">stringOrNullPref</span><span class="p">(</span><span class="s">&quot;favoriteCharacter&quot;</span><span class="p">).</span><span class="na">also</span> <span class="p">{</span>
    <span class="n">favoriteCharacterFlow</span> <span class="o">=</span> <span class="nb">it</span><span class="p">.</span><span class="na">valueFlow</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Then just use the properties:</p>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span> <span class="nf">setResponseOfTheUltimateQuestionOfLifeTheUniverseAndEverything</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">GamePreferences</span><span class="p">.</span><span class="na">magicNumber</span> <span class="o">=</span> <span class="m">42</span>
<span class="p">}</span>

<span class="kd">fun</span> <span class="nf">doSomeMagic</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">toast</span><span class="p">(</span><span class="s">&quot;Magic: </span><span class="si">${</span><span class="n">GamePreferences</span><span class="p">.</span><span class="na">magicNumber</span><span class="si">}</span><span class="s">!&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">fun</span> <span class="nf">resetProgress</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">GamePreferences</span><span class="p">.</span><span class="na">edit</span> <span class="p">{</span> <span class="c1">// Batch edit</span>
        <span class="n">currentLevel</span> <span class="o">=</span> <span class="m">1</span>
        <span class="n">bossesFought</span> <span class="o">=</span> <span class="m">0</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The supported types are:
* <code>Boolean</code>
* <code>Int</code>
* <code>Float</code>
* <code>Long</code>
* <code>String</code>
* <code>String?</code>
* <code>Set&lt;String&gt;</code>
* <code>Set&lt;String&gt;?</code></p>
<p>For <strong>default SharedPreferences</strong>, make an <code>object</code> that extends
<code>DefaultPreferences</code> instead of <code>Preferences</code>.</p>
<p>Note that for better encapsulation, you might want to keep the mutable delegated properties private
in some cases, and expose functions and flows instead.</p>
<h3 id="why-object-and-not-class">Why <code>object</code> and not <code>class</code>?<a class="headerlink" href="#why-object-and-not-class" title="Permanent link">&para;</a></h3>
<p>Unless you use coroutines (read more about this in next section just below),
a <code>class</code> instead of an <code>object</code> is not recommended because it would mean
you can instantiate it multiple times, while the underlying preferences
xml file is cached for the rest of your app's process lifetime once loaded,
so in a <code>class</code> you'd be allocating the delegates more times than needed,
leading to an additional, unneeded, small pressure on the garbage collector.</p>
<p>However, you may make an abstract subclass of <code>Preferences</code> for specific
use cases where adding logic to base <code>Preferences</code> or sharing some
properties may be desirable. (If you do, please open an issue to tell us
about this use case. It may become an example shown here.)</p>
<h2 id="loading-the-preferences-without-blocking-the-main-thread">Loading the preferences without blocking the main thread<a class="headerlink" href="#loading-the-preferences-without-blocking-the-main-thread" title="Permanent link">&para;</a></h2>
<p><em>Note that this feature is currently only supported on Android.
Feel free to open an issue if you want it on other platforms.</em></p>
<p>The <code>object</code> approach described above has several advantages, one of
the most significant being ease of use anywhere in your app, but that
also means you can easily access it from the main thread, and the first
time you access the object, the underlying xml file where the preferences
are stored is loaded, which may block the main thread for longer that you
would want, possibly dropping a few frames.</p>
<p>With coroutines, it's easy to offload something on another thread, and
this split embraces this capability.</p>
<p>Let's see a modified version of the <code>GamePreferences</code> described above,
before passing in review each change.</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="nn">splitties.preferences.SuspendPrefsAccessor</span>
<span class="k">import</span> <span class="nn">splitties.preferences.Preferences</span>

<span class="kd">class</span> <span class="nc">GamePreferences</span> <span class="n">private</span> <span class="k">constructor</span><span class="p">()</span> <span class="p">:</span> <span class="n">Preferences</span><span class="p">(</span><span class="s">&quot;gameState&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">companion</span> <span class="kd">object</span> <span class="err">: </span><span class="nc">SuspendPrefsAccessor</span><span class="o">&lt;</span><span class="n">GamePreferences</span><span class="o">&gt;</span><span class="p">(</span><span class="o">::</span><span class="n">GamePreferences</span><span class="p">)</span>

    <span class="kd">var</span> <span class="nv">magicNumber</span> <span class="k">by</span> <span class="n">intPref</span><span class="p">(</span><span class="s">&quot;magicNumber&quot;</span><span class="p">,</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="m">0</span><span class="p">)</span>
    <span class="kd">var</span> <span class="nv">currentLevel</span> <span class="k">by</span> <span class="n">intPref</span><span class="p">(</span><span class="s">&quot;currentLevel&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
    <span class="kd">var</span> <span class="nv">bossesFought</span> <span class="k">by</span> <span class="n">intPref</span><span class="p">(</span><span class="s">&quot;bossBattleVictories&quot;</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
    <span class="kd">var</span> <span class="nv">lastTimePlayed</span> <span class="k">by</span> <span class="n">longPref</span><span class="p">(</span><span class="s">&quot;lastSessionTime&quot;</span><span class="p">,</span> <span class="m">0L</span><span class="p">)</span>

    <span class="kd">val</span> <span class="nv">pseudoFlow</span><span class="p">:</span> <span class="n">Flow</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nv">pseudo</span> <span class="k">by</span> <span class="n">stringPref</span><span class="p">(</span><span class="s">&quot;playerPseudo&quot;</span><span class="p">,</span> <span class="s">&quot;Player 1&quot;</span><span class="p">).</span><span class="na">also</span> <span class="p">{</span>
      <span class="n">pseudoFlow</span> <span class="o">=</span> <span class="nb">it</span><span class="p">.</span><span class="na">valueFlow</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="kd">val</span> <span class="nv">favoriteCharacterFlow</span><span class="p">:</span> <span class="n">Flow</span><span class="o">&lt;</span><span class="kt">String?</span><span class="o">&gt;</span>
    <span class="kd">var</span> <span class="nv">favoriteCharacter</span> <span class="k">by</span> <span class="n">stringOrNullPref</span><span class="p">(</span><span class="s">&quot;favoriteCharacter&quot;</span><span class="p">).</span><span class="na">also</span> <span class="p">{</span>
      <span class="n">favoriteCharacterFlow</span> <span class="o">=</span> <span class="nb">it</span><span class="p">.</span><span class="na">valueFlow</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Here are all the changes:
1. We moved from <code>object</code> to <code>class</code>.
2. We added a <code>private constructor()</code>.
3. We added a <code>companion object</code> that extends the <code>SuspendPrefsAccessor</code> abstract
class and calls its constructor with a reference to the constructor.</p>
<p>With this change, we can no longer access the <code>GamePreferences</code> singleton directly
from anywhere‚Ä¶ unless we are in a coroutine!</p>
<p>From any <code>suspend</code> function, you
just have to call <code>GamePreferences()</code> like you were calling a constructor, but
in reality, it is a function call that suspends while loading the preferences
for the first time in process life in <code>Dispatchers.IO</code>.</p>
<p>If the preferences have already been loaded, it immediately returns the now
instantiated singleton.</p>
<p>If you have non suspending functions that would need to access the preferences,
you have two options: pass your <code>Preferences</code> subclass as a parameter, or make
it a <code>suspend</code> function.</p>
<h2 id="using-androidx-datastore-instead-of-sharedpreferences-under-the-hood">Using AndroidX DataStore instead of SharedPreferences under the hood<a class="headerlink" href="#using-androidx-datastore-instead-of-sharedpreferences-under-the-hood" title="Permanent link">&para;</a></h2>
<p>Android's <code>SharedPreferences</code> has one performance drawback: it can perform disk I/O
on the main thread on its own when the <code>onStop</code> callback of an <code>Activity</code> is called.
The only way to ensure your app will not be affected by the potential ANRs
(Application Not Responding) it can cause is to replace it with something else.</p>
<p>The AndroidX team made <a href="https://developer.android.com/topic/libraries/architecture/datastore">DataStore</a>
just for that, but its API is not compatible, which would require significant code changes in host projects. </p>
<p>If you use this (Splitties Preferences) however, all the hard work has been done for you.</p>
<p>There are just 3 quick steps to perform to use DataStore instead of SharedPreferences:</p>
<ol>
<li>Make sure you use <code>SuspendPrefsAccessor</code>, as described in the section above (not doing so will crash on first access).</li>
<li>Extend <code>DataStorePreferences</code> instead of <code>Preferences</code>.</li>
<li>Opt-in by adding <code>@OptIn(DataStorePreferencesPreview::class)</code> to your class.</li>
</ol>
<p>Once you're done, test your app to make sure it still works fine.</p>
<p>Data migration is automatically done if you're moving from SharedPreferences and keep the same name.
If you were using <code>DefaultPreferences</code>, you can pass <code>null</code> to <code>name</code>.</p>
<p>Be sure that there's only one class that uses the same name, or DataStore will throw.</p>
<p>Finally, note that direct boot (aka. deviceProtectedStorage) is not supported yet, but is being considered.
Add a üëç on <a href="https://github.com/LouisCAD/Splitties/issues/290">this issue</a> to raise the priority.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../material-lists/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Material Lists" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Material Lists
            </div>
          </div>
        </a>
      
      
        
        <a href="../permissions/" class="md-footer__link md-footer__link--next" aria-label="Next: Permissions" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Permissions
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright ¬© 2021 Louis CAD
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.f8263e09.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.4fc53ad4.min.js"></script>
      
    
  </body>
</html>